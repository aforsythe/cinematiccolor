\Preamble{3,charset=utf-8,fn-in,javascript,html5,mathml,refcaption,sec-filename,sections+,xhtml}

% Custom commands.
\newcommand\ccclosepar{\ifvmode\IgnorePar\fi\EndP}
\newcommand{\ccjericontainer}[1]
    {\HCode{\Hnewline
        <div class="border d-block my-3 p-3">\Hnewline\Hnewline
            <div id="#1" class="jeri-container"></div>\Hnewline
        </div>\Hnewline}}

\DeclareGraphicsExtensions{.svg,.png,.jpg}

\Configure{maketitle}
    {\ccclosepar\HCode{<section class="page-title"><div class="container-fluid text-center pt-3">}\NoFonts}
    {\EndNoFonts\ccclosepar\HCode{</div></section>}}
    {\HCode{<h1 class="title text-center">}}
    {\HCode{</h1>}}

\Configure{@HEAD}
    {\HCode{
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>\Hnewline
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.1/react.js"></script>\Hnewline
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.1/react-dom.js"></script>\Hnewline
        <script type="text/javascript" src="assets/js/jeri/jeri.js"></script>\Hnewlines
        <link rel="stylesheet" type="text/css" href="assets/css/bootstrap/bootstrap.min.css"/>\Hnewline
        <link rel="stylesheet" type="text/css" href="assets/css/custom.css"/>\Hnewline
    }}

\Configure{@BODY}
    {\ccclosepar\HCode{
        <article class="page-content">
            <div class="container-fluid py-3">\Hnewline
                <div class="row">\Hnewline
                    <div class="col-md-2"></div>\Hnewline
                    <div class="col-md-8">\Hnewline
    }}

\Configure{@/BODY}
    {\ccclosepar\HCode{
                    </div>\Hnewline
                    <div class="col-md-2"></div>\Hnewline
                </div>\Hnewline
            </div>\Hnewline
        </article>
    }}

\Configure{@/BODY}
    {\ccclosepar\HCode{
        <footer class="page-footer">
            <div class="container-fluid text-center py-3">
                Copyright &copy; 2019 &hyphen; Cinematic Color Authors &hyphen;
                <a href="mailto:ves-tech-color@googlegroups.com">
                    ves-tech-color@googlegroups.com</a>
            </div>
        </footer>
    }}

\Configure{@/BODY}
    {\ccclosepar\HCode{
        <script type="text/javascript" src="assets/js/jquery/jquery.min.js"></script>\Hnewline
        <script type="text/javascript" src="assets/js/popper/popper.min.js"></script>\Hnewline
        <script type="text/javascript" src="assets/js/bootstrap/bootstrap.min.js"></script>\Hnewline
    }}

\Configure{crosslinks+}
    {}
    {}
    {\ccclosepar\HCode{<div class="breadcrumb-navigation text-center">}}
    {\ccclosepar\HCode{</div>}}

\Configure{crosslinks}
   {}
   {}
   {\HCode{<button type="button" class="btn btn-light mx-3">Next</button>}}
   {\HCode{<button type="button" class="btn btn-light mx-3">Previous</button>}}
   {}
   {}
   {}
   {\HCode{<button type="button" class="btn btn-light mx-3">Up</button>}}

\Configure{crosslinks*}{prev}{up}{next}{}

\ConfigureEnv{figure}
    {\ccclosepar\HCode{<figure class="environment-figure border d-block my-3 p-3"\Hnewline>}\bgroup\Configure{float}{\ShowPar}{}{}}
    {\egroup\ccclosepar\HCode{</figure>}\ShowPar\par}
    {}
    {}

\ConfigureEnv{table}
   {\ccclosepar\HCode{<div class="environment-table table-responsive border d-block my-3 p-3">}}
   {\ccclosepar\HCode{</div>}\par\ShowPar}
   {}
   {}

\ConfigureEnv{lstlisting}
    {\ccclosepar\HCode{<div class="environment-listing border d-block my-3 p-3">}}
    {\ccclosepar\HCode{</div>}}
    {}
    {}

\Configure{tabular}
    {\ccclosepar\HCode{<table class="table">}}
    {\ccclosepar\HCode{</table>}}
    {\HCode{<tr>}}
    {\HCode{</tr>}}
    {\HCode{<td \ifnum\HMultispan>1 colspan="\HMultispan"\fi >}}
    {\HCode{</td>}}

\Configure{IMG}
    {\HCode{<img class="figure-img img-fluid" src="}}
    {\HCode{" alt="}}
    {}
    {\HCode{"}}
    {\HCode{/>}}

\Configure{graphics*}
    {svg}{
        {\Configure{Needs}{File: \Gin@base.svg}\Needs{}}
        \Picture[\csname a:GraphicsAlt\endcsname]{\csname Gin@base\endcsname.svg width="\csname Gin@req@width\endcsname"}
    }

\Configure{caption}
    {\ccclosepar\HCode{<figcaption class="figure-caption"><span class="caption-name">}}
    {:\HCode{</span> }}
    {}
    {\HCode{</figcaption>}}

\begin{document}

\EndPreamble
